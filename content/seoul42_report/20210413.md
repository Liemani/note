### 1. 학습 날짜

- 2021-04-13(화)

### 2. 학습시간

- 13:40 ~ 17:40 (자가)
- 18:30 ~ 21:20 (자가)

### 3. 학습 범위 및 주제

- personal project - variabledText
  - cLibrary

### 4. 동료 학습 방법

- 해당 사항 없음

### 5. 학습 목표

- personal project - variabledText
  - cLibrary
    - 문자열을 정돈하여 출력하는 stringPrettyFlush() 함수 작성하기
    - equal() 기능 추가하기

### 6. 상세 학습 내용

#### [slack -> jbee/좋은 코드란 무엇일까?](https://jbee.io/etc/what-is-good-code/)

오늘 슬랙 랜덤 채널에에 오종인 맨토님이 공유해주신 좋은 코드란 무엇일까? 라는 글을 읽었다. 내가 얕게 알고 있는 '좋은 코드' 에 대해 더 단단히 할 수 있는 기회가 되었다.

- 가독성
  - 나는 무엇보다 가독성 좋은 코드를 최고로 친다. 함수 이름, 변수 이름 등을 가독성을 위해 신중히 여러번 생각하는 편이다.
- 의존성
  - 의존성에 대해서는 지금껏 깊게 생각해본적이 없다. 오늘 이 글을 읽고 내 코드를 보니 의존성 측면에서 더 보강할 부분이 있다는 것을 깨닳았다. 일부 코드는 불필요하게 `include` 를 사용하고 있다는 것을 깨닳았다.
  - 거기다가 막연하게 `include` 에 대해 알고 있던 것을 더 생각해 볼 수 있었다. `include` 라는 것이 단순히 파일만 추가해준다고 끝이 아니라, 만약 두 파일이 서로가 서로를 `include` 하는 경우 컴파일이 진행되는 순서를 구체적으로 생각해 볼 수 있었다.

의존성 측면에서 볼 때 아래와 같은 코드가 있다고 하자

```c
// file1.h
#include "file2.h

// file2.h
#include "file1.h
```

이 코드는 `#ifndef` 으로 중복 include 를 잘 막아놨다고 하자. 그러면 file1.c 를 컴파일 할 때는 file2.h 가 file1.h 보다 먼저 컴파일러에 의해 읽히게 된다. file2.h -\> file1.h -\> -\> file1.c 의 순서인 것이다. 그리고 file2.c 를 컴파일 할 때는 file2.h 와 file1.h 의 순서가 바뀐다. 따라서 이로 인한, typedef 나 function prototype 등의 관리가 필요한 것이다. 가장 좋은 것은 파일들 간에 명확한 방향성을 가지도록 하는 것이겠지만, 이런 저런 구조를 만들다보면 상호 참조가 일어날 수 밖에 없다. 앞으로 이 부분을 더 신경 쓰면서 코딩을 할 수 있게 되었다

- 확장성
  - 확장성도 많이 사람들이 강조하는 부분이다. 필요한 부분에는 확장성에 유리하도록 코딩을 하되, 때에 따라서는 확장성을 무시하더라도 빠르게 코딩할 줄도 알아야 된다고 생각한다. 그런데 이런 지식과는 다르게, 실제로 확장성 좋은 코드를 짠다는게 구체적으로 무엇인가에 대해서는 잘 이해하지 못하고 있었다. 그러다가 오늘 내 코드를 보다가 우연히 코드를 확장해야할 일이 생겨서 이 문제에 대해 더 생각해 볼 수 있었다.

아래는 내가 개인적으로 진행하고 있는 cLibrary 프로젝트의 일부이다

```c
typedef struct      s_class
{
    t_instance      *(*new)();
    void            (*dealloc)(t_instance *instance);
    t_string        *(*description)(t_instance *instance);
//  int             (*equal)(t_instance *lhs, void *rhs);
    t_kernelList    *instanceList;
}                   t_class;
```

주석처리한 부분이 이전에는 없던 부분인데, 이 라이브러리를 활용한 프로그램을 만들던 중,  t\_class 에 새로운 인자로 equal 이 필요하다는 것을 깨닫게 되었다. 그런데 t\_class 라는 구조체는 다른 여러 파일이 사용하는 구조체라서 이 새로운 맴버로 인해 모든 파일을 수정해야할 수도 있겠다라는 생각을 하게 되었다. 그런데 생각을 해보니 굳이 그렇게 하지 않더라도 equal 이라는 맴버가 쓰이는 것을 잘 생각해서 함수를 작성해보면 다른 파일에서 이 변수를 정의하지 않았다면 default 값으로 정의된 값을 사용하는 방식으로 실행 가능한 코드를 빠르게 작성할 수 있겠다는 생각을 하게 되었다. 즉, 확장성이 좋다는 말은 새로운 무언가가 추가되었을 때, 모든 파일을 수정하지 않더라도 쉽고 빠르게 실행 가능한 코드를 만들 수 있는 것이라고 생각한다

- 일관성: 나는 일관성 있는 코드를 좋아한다. 일관성 있는 이름을 사용하면 함수 이름만 보더라도 '아 이 함수는 이걸 이렇게 하는 함수구나' 라는 것을 알 수 있고, 더 나아가, 존재하지 않는 함수를 미리 사용하고 구현은 나중에 할 수도 있다. 또는 '이런 함수가 있을까?' 하고 사용해보면 내가 의도한 대로 동작하는 함수가 존재하는 경우도 있다

#### personal project - cLibrary

최근에 여러 error 를 만나고 해결하면서 얻게된 것이 있다. 생각보다 error 에 대해서 집중적으로 정보를 작성한 문서를 찾기는 쉽지 않은 것 같다. 최근 만난 에러를 토대로 에러가 발생하는 경우를 따져보았다.

1. 로직이 틀렸다

- 우선은 에러가 발생하려면 로직이 틀려야한다. 그리고 결과적으로 변수에 내가 의도한 것과 다른 값이 들어가야만 한다

2. 에러의 원인

2-1. 잘못된 계산

- 단순히 계산이 틀려서 값이 잘못 들어갔을 수 있다. 이 문제는 로직을 따라가다 보면 머릿속으로 잘못된 계산이라는 것을 알 수 있는 경우도 많다

2-2. free 한 메모리 주소를 참조한다

- 혹은 free 한 메모리 주소를 참조하는 실수를 저지를 수도 있다 (최근 2 개의 에러는 이 경우였다). 이 경우는 처음 접하는 경우 매우 황당한데, 일단 확률적으로 제대로 실행되기도 하고 에러가 발생한다. 그리고 겉모양은 마치 제대로 설계된 코드처럼 보인다.

그럼 이렇게, 변수에 잘못된 값이 들어가면 어떤 문제가 발생할 수 있을까?

3. 에러의 결과

3-1. 가장 먼저 쉽게 접하는 경우는 무한 루프이다. 혹은 예상한 만큼 루프를 돌지 않는 경우이다.

- 이 경우는 루프의 조건에 들어 있는 변수의 값이 의도와 다르게 처리되거나 입력되었을 때 발생한다.

3-2. 라이브러리 함수 오류, 참조 오류

- malloc() 의 size 값이나 free() 의 주소 값이 의도와 다른 값이 들어가게 되면 발생한다. 이 경우 segmentation error, bus error, abort 등, 쓰인 함수와 들어간 값에 따라 다양한 방식의 error 를 만들어낸다

4. 에러 탐색

- 에러의 해결 방법을 생각해보자. 에러의 근본적인 문제는 변수에 '잘못된 값' 이 들어간 것이다. 따라서 언제 어디서 잘못된 값이 들어갔는가를 찾는게 첫 단계이다. 여기 저기에서 의심 스러운 변수를 printf() 로 출력해 볼 수도 있고, 디버깅 프로그램으로 출력해 볼 수도 있다. 예상과 다른 값이 있는 것을 발견했다면 그것을 단서로 더욱 더 에러의 위치를 좁혀나가자. 그럼 언젠가 문제의 위치를 알 수 있게 될 것이다

5. 에러 바로잡기

- 결국 에러를 고치는 작업은 1 번의 잘못된 로직을 수정하는 일이다. 이 잘못된 로직으로 인해 2-1 처럼 단순히 잘못된 계산을 옳게 수정하는 것일 수도 있고, 2-2 처럼, 메모리의 할당과 해제를 잘못하여 잘못된 주소에 접근하여 잘못된 값을 가져오던 코드를 수정하여 옳바른 주소에 접근하도록 수정하는 것일 수도 있다

### 7. 학습 내용에 대한 개인적인 총평

- 오늘은 개인 프로젝트를 진행하면서 '내 코드를 더 좋게 만들기 위해 좋지 않은 부분이 있다면 어떻게 해결하는게 좋을까' 를 많이 생각해봤습니다. 최근 계속 만들고 있는 cLibrary 를 직접 테스트해보고 제대로 동작하는 모습을 볼 때는 무척 뿌듯합니다. 새로운 기능을 추가하기 위해 이슈가 있는 부분을 생각하여 적용하는 것도 재밌습니다.

### 8. 다음 학습 계획

- cLibrary
  - equal() 구현 
- variabledText
  - program.c/applyVariable()
  - variable 파싱해서 dictionary 에 넣어주기
  - text 를 읽으면서 escape sequence 처리하도록 하기
  - 나중에 관심 있으면 description 이 string 을 return 하는 기능 추가
하기
  - 변수의 값에 '\n' 를 넣을 수 있게하려면 변수 간의 delimiter 를 '\n' 로 하면 안되는 걸까?
  - 변수 식별자를 일괄적으로 바꾸는 추가 기능
  - 다양한 경고 (위치와 해당 라인 출력)
    - 정의하지 않은 식별자 사용 경고
    - 사용하지 않은 식별자 정의 경고
    - 중복 정의된 식별자 경고
  - `\\` 가 결과물에 `\` 를 출력하도록
  - open() 과 write() 를 사용할 때 생성되는 파일의 권한 문제
  - 프로그램 실행을 global 하게 설정하는 방법
- miniRT
  - rasterization 검색
  - api 사용해보기
- ft\_server
  - Nginx 알아보기
  - 슬랙, 디코, 42wiki 에서 정보 얻기
  - vnc 로 돌려보기
  - Wordpress
  - phpMyAdmin
  - SQL databse
