### 1. 학습 날짜

- 2021-01-07(목)

### 2. 학습시간

- 09:00 ~ 11:00 (자가)
- 20:00 ~ 22:30 (자가)

### 3. 학습 범위 및 주제

- netwhat

### 4. 동료 학습 방법

- 해당 사항 없음

### 5. 학습 목표

- netwhat 을 위한 네트워크 기초 지식 학습

### 6. 상세 학습 내용

- [네트워크 관련 블로그](https://www.stevenjlee.net)
- 오늘 아주 좋은 사이트를 발견했습니다. 이 사이트에는 네트워크의 기초에 대한 내용이 있습니다
- [인터넷의 구성도](https://www.stevenjlee.net/2020/01/09/aboutinternet/)
- [OSI 7 계층과 TCP/IP 4 계층](https://www.stevenjlee.net/2020/02/09/이해하기-osi-7계층-그리고-tcp-ip-4계층/)
  - OSI 7 계층에서는 데이터를 전송할 때 각각의 층마다 별도로 인식할 수 있는 헤더를 붙이며 이를 Encapsulation 이라고 한다
  - 반대로 데이터가 전송 매체를 통해 전송된 후 헤더가 벗겨지는 것을 De-encapsulation 이라고 한다
  - 즉, 각 계층은 아래 계층의 데이터 (payload) 가 된다
  - 상위 계층의 데이터에 각종 정보를 담는 헤더가 붙는다
  - TCP/IP 4 계층 (괄호 안은 OSI)
    - Application (5 ~ 7)
	- Transport (4)
	  - 전달되는 패킷의 오류를 검사하고 재전송을 요구하는 등의 전반적인 제어를 담당
	- Internet (3)
	  - 패킷을 목적지까지 효율적으로 전달하는 것을 담당
	  - IP 주소를 판독하여 목적지의 네트워크를 찾아가서 해당 목적지(호스트) 가 잘 받을 수 있도록 전송
	- Network Interface (1 ~ 2)
	  - 물리적인 TCP/IP 패킷의 전달 및 수신 과정을 담당
- [ARP (Address Resolution Protocol) 프로토콜](https://www.stevenjlee.net/2020/06/07/이해하기-arp-address-resolution-protocol-프로토콜/)
  - 소프트웨어적으로 할당된 논리 주소인 IP 주소를 실제적인 물리 주소인 MAC 주소로 바꾸어주는 역할을 한다
  - 반대로 MAC 주소를 가지고 IP 주소를 알아내는 프로토콜은 RARP 프로토콜이라고 한다 (최근에는 거의 사용하지 않는다고 한다)
  - MAC 주소는 시리얼 번호와 같이 전 세계에서 유일한 주소이다
  - 두 단말이 같은 네트워크에 있을 때
    - 같은 네트워크 내에 있는 단말들의 MAC 주소는 중계 장치 (허브, 스위치 등) 가 MAC 주소 테이블 정보를 저장하고 관리한다
	- 단말들끼리 MAC 주소를 가지고 통신을 할 수 있다
	- Broadcast 방식: 데이터를 네트워크에 연결된 모든 단말에 전송
	1. A 가 같은 네트워크 대역에 ARP 요청을 브로드캐스트 방식으로 B 의 10.0.0.2/24 IP 주소를 가진 단말이 있는지 물어본다
	  - A 는 B 의 MAC 주소를 모르기 때문에 MAC 주소는 일단 기본 게이트웨이 (FF:FF:FF:FF:FF:FF) 로 기록한다
	2. 네트워크 스위치 장비는 A 의 MAC 주소 (00:11:BB:00:00:AA) 를 자신의 MAC 주소 테이블에 저장한다 (저장되어 있지 않은 경우)
	3. 네트워크 스위치 장비가 ARP 요청을 받고나서 자신이 가지고 있는 MAC 테이블에서 B 의 IP 주소 10.0.0.2/24 의 MAC 주소 (00:11:BB:00:00:BB) 가 저장되어 있다면, A 에게 B 의 IP 주소 10.0.0.2/24 에 대한 MAC 주소 (00:11:BB:00:00:BB) 를 알려준다
	4. 만약 B 의 IP 주소의 MAC 주소가 저장되어 있지 않다면 반대편의 B 까지 ARP 요청이 전달된다. 이후 B 는 ARP 요청을 받은 다음 자신의 IP 주소가 목적지에 기록되어 있음을 확인한 후 자신의 MAC 주소를 알려주는 응답을 한다. 이후 네트워크 스위치는 B 의 MAC 주소를 MAC 주소 테이블에 저장한다
	5. A 는 전달받은 B 의 MAC 주소를 확인하고 B 와 통신을 시작한다
  - 두 단말이 다른 네트워크에 있을 때
    - IP 주소를 이용하여 통신을 하게 되며 ARP 프로토콜을 통해 IP 주소와 MAC 주소 간 변환을 통해 통신을 하게 된다
	1. A 가 같은 네트워크 대역에 ARP 요청을 브로드캐스트 방식으로 B 의 IP 주소를 가진 단말이 있는지 물어본다. 아직 B 의 MAC 주소를 모르므로 기본 게이트웨이로 기록한다 (FF:FF:FF:FF:FF:FF)
	2. 라우터는 해당 ARP 요청을 받고 목적지 B 의 IP 주소가 같은 네트워크에 있지 않기 때문에 같은 네트워크 대역대에 있는 라우터 자신의 인터페이스 MAC 주소 (00:00:00:00:RR:00) 로 응답해준다
	3. A 는 다시 라우터에게 B 의 목적지 IP 주소 20.0.0.1/24 와 같은 네트워크 대역의 라우터 인터페이스 MAC 주소 (00:00:00:00:RR:00) 를 목적지로 ARP 요청을 보낸다
	4. 라우터는 해당 네트워크 대역까지 패킷을 보낸다. 단, 라우터도 목적지 B 의 MAC 주소를 모르므로 해당 네트워크 대역대에 Broadcast 메세지로 20.0.0.1/24 IP 주소를 가진 단말이 있는지 물어본다
	5. B 단말이 자신의 IP 주소가 목적지로 되어 있는 패킷을 보고 라우터에게 자신의 MAC 주소를 포함하여 응답한다
	6. 이후 라우터를 통해 A 와 B 가 통신을 시작한다 (MAC <-> IP <-> MAC)
	- MAC 주소를 어렵게 얻어왔으므로 각 단말은 방금 통신한 IP 주소의 MAC 주소를 일정 시간 동안 보관하여 활용하며 이를 ARP 캐시라고 한다
  - ARP 패킷은 기본적으로 같은 네트워크 내에서만 동작하는 프로토콜이다
  - 따라서 멀리있는 다른 네트워크와 통신하기 위한 IP 헤더가 필요없다

### 7. 학습 내용에 대한 개인적인 총평

오늘은 주문했던 맥북이 도착해서 세팅을 하느라고 공부를 많이 하지 못했습니다. 프로토콜이라는 것은 데이터 앞에 헤더를 붙인다는게 결국 추가적인 데이터를 담는 bit 들을 붙이는 것이고 결국 이걸 받는 곳에서는 bit 의 위치에 따른 약속된 의미로 해석하는 것 같습니다. 오늘 ARP 프로토콜이라고 하는 것을 보았는데 이런식으로 구체적인 프로토콜 작동을 하나 보니 프로토콜이 어떤 것인지 감이 오는 것 같습니다

### 8. 다음 학습 계획

- netwhat 공부하기
  - IP
  - Netmask
  - subnet of an IP with Netmask
  - broadcast address of a subnet
  - UDP
  - router
  - packet switching
  - packet forwarding
  - Connectionless communication
  - connection\_oriented communication
- get\_next\_line
- printf
